/*!
* @indoorequal/vue-maplibre-gl v8.4.3
* (c) 2025 Fran√ßois de Metz <francois@2metz.fr>
* @license MIT
*/
(function(c,t){typeof exports=="object"&&typeof module<"u"?t(exports,require("vue"),require("maplibre-gl")):typeof define=="function"&&define.amd?define(["exports","vue","maplibre-gl"],t):(c=typeof globalThis<"u"?globalThis:c||self,t(c.VueMaplibreGl={},c.Vue,c.maplibregl))})(this,(function(c,t,p){"use strict";const k=Symbol("map"),h=k,N=Symbol("isLoaded"),T=Symbol("isInitialized"),_=T,S=Symbol("componentId"),M=Symbol("sourceId"),C=Symbol("sourceLayerRegistry"),A=Symbol("marker"),ge=["error","load","idle","remove","render","resize","webglcontextlost","webglcontextrestored","dataloading","data","tiledataloading","sourcedataloading","styledataloading","sourcedata","styledata","styleimagemissing","dataabort","sourcedataabort","boxzoomcancel","boxzoomstart","boxzoomend","touchcancel","touchmove","touchend","touchstart","click","contextmenu","dblclick","mousemove","mouseup","mousedown","mouseout","mouseover","movestart","move","moveend","zoomstart","zoom","zoomend","rotatestart","rotate","rotateend","dragstart","drag","dragend","pitchstart","pitch","pitchend","wheel","terrain","cooperativegestureprevented"];function ye(e,o,r,n){return a=>r.emit(n,{type:a.type,map:o,component:e,event:a})}function pe(e,o){const r=p.LngLat.convert(e),n=p.LngLat.convert(o);return r.lng===n.lng&&r.lat===n.lat}var B=(e=>(e.TOP_LEFT="top-left",e.TOP_RIGHT="top-right",e.BOTTOM_LEFT="bottom-left",e.BOTTOM_RIGHT="bottom-right",e))(B||{});const w=Object.values(B),R=new Map,x=Symbol("default");function be(e=x){let o=R.get(e);return o||(o=t.reactive({isLoaded:!1,isMounted:!1,language:null}),R.set(e,o)),o}function he(e,o,r=x){let n=R.get(r);return n||(n=t.reactive({isLoaded:!1,isMounted:!1,language:null}),R.set(r,n)),n.isLoaded=o.value?.loaded()||!1,n.isMounted=!1,n.component=e,n.map=o.value,n}const E=t.defineComponent({name:"MglMap",props:{width:{type:[Number,String],default:"100%"},height:{type:[Number,String],default:"100%"},attributionControl:{type:[Boolean,Object],default:void 0},bearing:{type:Number},bearingSnap:{type:Number},bounds:{type:[Array,Object]},boxZoom:{type:Boolean,default:void 0},center:{type:[Array,Object]},clickTolerance:{type:Number},collectResourceTiming:{type:Boolean,default:void 0},crossSourceCollisions:{type:Boolean,default:void 0},dragPan:{type:Boolean,default:void 0},dragRotate:{type:Boolean,default:void 0},doubleClickZoom:{type:Boolean,default:void 0},hash:{type:[Boolean,String],default:void 0},fadeDuration:{type:Number},fitBoundsOptions:{type:Object},interactive:{type:Boolean,default:void 0},keyboard:{type:Boolean,default:void 0},locale:{type:Object},localIdeographFontFamily:{type:String},logoPosition:{type:[String],validator:e=>e in B},maxBounds:{type:[Array,Object]},maxPitch:{type:Number},maxZoom:{type:Number},minPitch:{type:Number},minZoom:{type:Number},pitch:{type:Number},pitchWithRotate:{type:Boolean,default:void 0},canvasContextAttributes:{type:Object},refreshExpiredTiles:{type:Boolean,default:void 0},renderWorldCopies:{type:Boolean,default:void 0},scrollZoom:{type:Boolean,default:void 0},mapStyle:{type:[String,Object]},trackResize:{type:Boolean,default:void 0},transformRequest:{type:Function},transformCameraUpdate:{type:Function},touchZoomRotate:{type:Boolean,default:void 0},touchPitch:{type:Boolean,default:void 0},zoom:{type:Number},maxTileCacheSize:{type:Number},mapKey:{type:[String,Symbol]},pixelRatio:{type:Number},validateStyle:{type:Boolean,default:void 0},cooperativeGestures:{type:Boolean}},emits:["map:error","map:load","map:idle","map:remove","map:render","map:resize","map:webglcontextlost","map:webglcontextrestored","map:dataloading","map:data","map:tiledataloading","map:sourcedataloading","map:styledataloading","map:sourcedata","map:styledata","map:styleimagemissing","map:dataabort","map:sourcedataabort","map:boxzoomcancel","map:boxzoomstart","map:boxzoomend","map:touchcancel","map:touchmove","map:touchend","map:touchstart","map:click","map:contextmenu","map:dblclick","map:mousemove","map:mouseup","map:mousedown","map:mouseout","map:mouseover","map:movestart","map:move","map:moveend","map:zoomstart","map:zoom","map:zoomend","map:rotatestart","map:rotate","map:rotateend","map:dragstart","map:drag","map:dragend","map:pitchstart","map:pitch","map:pitchend","map:wheel","map:terrain","map:cooperativegestureprevented","map:projectiontransition","update:center","update:zoom","update:pitch","update:bearing"],slots:Object,setup(e,o){const r=t.markRaw(t.getCurrentInstance()),n=t.shallowRef(),a=t.shallowRef(),u=t.ref(!1),d=t.ref(!1),s=new Map,m=he(r,a,e.mapKey);t.provide(h,a),t.provide(N,d),t.provide(_,u),t.provide(S,r.uid),t.provide(M,""),t.watch(()=>e.bearing,l=>{l&&a.value?.setBearing(l)}),t.watch(()=>e.bounds,l=>{l&&a.value?.fitBounds(l,e.fitBoundsOptions)}),t.watch(()=>e.center,l=>{const g=a.value?.getCenter();l&&g&&!pe(l,g)&&a.value?.setCenter(l)}),t.watch(()=>e.maxBounds,l=>{l&&a.value?.setMaxBounds(l)}),t.watch(()=>e.maxPitch,l=>{l&&a.value?.setMaxPitch(l)}),t.watch(()=>e.maxZoom,l=>{l&&a.value?.setMaxZoom(l)}),t.watch(()=>e.minPitch,l=>{l&&a.value?.setMinPitch(l)}),t.watch(()=>e.minZoom,l=>{l&&a.value?.setMinZoom(l)}),t.watch(()=>e.pitch,l=>{l&&a.value?.setPitch(l)}),t.watch(()=>e.renderWorldCopies,l=>{l&&a.value?.setRenderWorldCopies(l)}),t.watch(()=>e.mapStyle,l=>{l&&a.value?.setStyle(l)}),t.watch(()=>e.transformRequest,l=>{l&&a.value?.setTransformRequest(l)}),t.watch(()=>e.zoom,l=>{l&&a.value?.setZoom(l)}),t.watch(()=>e.zoom,l=>{l&&a.value?.setZoom(l)});function i(){m.isMounted=!0;const l={...e,style:e.mapStyle,container:n.value};for(const g of Object.keys(l))l[g]===void 0&&delete l[g];if(a.value=t.markRaw(new p.Map(l)),m.map=a.value,u.value=!0,s.set("__load",()=>(d.value=!0,m.isLoaded=!0)),a.value.on("load",s.get("__load")),s.set("__moveend",()=>o.emit("update:center",a.value.getCenter())),a.value.on("moveend",s.get("__moveend")),s.set("__zoomend",()=>o.emit("update:zoom",a.value.getZoom())),a.value.on("zoomend",s.get("__zoomend")),s.set("__pitchend",()=>o.emit("update:pitch",a.value.getPitch())),a.value.on("pitchend",s.get("__pitchend")),s.set("__rotateend",()=>o.emit("update:bearing",a.value.getBearing())),a.value.on("rotateend",s.get("__rotateend")),r.vnode.props){for(const g of ge)if(r.vnode.props["onMap:"+g]){const je=`map:${g}`,fe=ye(r,a.value,o,je);s.set(g,fe),a.value.on(g,fe)}}a.value.getCanvas().addEventListener("webglcontextlost",z)}async function f(){m.isMounted=!1,m.isLoaded=!1,d.value=!1,a.value&&(a.value.getCanvas().removeEventListener("webglcontextlost",z),u.value=!1,s.forEach((l,g)=>{a.value.off(g.startsWith("__")?g.substring(2):g,l)}),a.value.remove())}function z(){f(),t.nextTick(i)}return t.onMounted(i),t.onBeforeUnmount(f),o.expose({map:a}),()=>[t.h("div",{ref:n,style:{height:e.height,width:e.width}}),u.value&&o.slots.default?o.slots.default({}):void 0]},render(){return null}});function q(e,o,r){t.watch(e,n=>{n&&w.indexOf(n)===-1||(o.value?.hasControl(r)&&o.value.removeControl(r),o.value?.addControl(r,n))},{immediate:!0})}function L(e,o){const r=t.inject(h),n=t.inject(_),a=t.shallowRef();return a.value=e(),q(()=>o.position,r,a.value),t.onBeforeUnmount(()=>n.value&&r.value?.removeControl(a.value)),{control:a,map:r}}const F=t.defineComponent({name:"MglAttributionControl",props:{position:{type:String,validator:e=>w.indexOf(e)!==-1},compact:Boolean,customAttribution:[String,Array]},setup(e){L(()=>new p.AttributionControl({compact:e.compact,customAttribution:e.customAttribution}),e)},render(){return null}});class Se{constructor(o,r){this.isAdded=o,this.container=document.createElement("div"),this.setClasses(r)}container;getDefaultPosition(){return B.TOP_LEFT}onAdd(){return t.nextTick(()=>this.isAdded.value=!0),this.container}onRemove(){this.isAdded.value=!1,this.container.remove()}setClasses(o){this.container.className=o}}const V=t.defineComponent({name:"MglCustomControl",props:{position:{type:String,validator:e=>w.indexOf(e)!==-1},class:{type:String,default:"maplibregl-ctrl maplibregl-ctrl-group"}},slots:Object,setup(e,{slots:o}){const r=t.ref(!1),{control:n}=L(()=>new Se(r,e.class),e);return t.watch(()=>e.class,()=>n.value.setClasses(e.class)),()=>r.value?t.h(t.Teleport,{to:n.value.container},o.default?.({})):t.createCommentVNode("custom-component")},render(){return null}}),U=t.defineComponent({name:"MglFullscreenControl",props:{position:{type:String,validator:e=>w.indexOf(e)!==-1},container:{type:Object,default:null}},setup(e){const{control:o,map:r}=L(()=>new p.FullscreenControl({container:e.container||void 0}),e);function n(){t.nextTick(()=>r.value?.resize())}o.value.on("fullscreenstart",n),o.value.on("fullscreenend",n),t.onBeforeUnmount(()=>{o.value.off("fullscreenstart",n),o.value.off("fullscreenend",n)})},render(){return null}}),Z=t.defineComponent({name:"MglGeolocateControl",props:{position:{type:String,default:B.TOP_RIGHT,validator:e=>w.indexOf(e)!==-1},positionOptions:{type:Object,default:()=>({enableHighAccuracy:!1,timeout:6e3})},fitBoundsOptions:{type:Object,default:()=>({maxZoom:15})},trackUserLocation:{type:Boolean,default:!1},showAccuracyCircle:{type:Boolean,default:!0},showUserLocation:{type:Boolean,default:!0}},emits:["trackuserlocationstart","trackuserlocationend","userlocationlostfocus","userlocationfocus","geolocate","error","outofmaxbounds"],setup(e,o){const{control:r}=L(()=>new p.GeolocateControl({positionOptions:e.positionOptions,fitBoundsOptions:e.fitBoundsOptions,trackUserLocation:e.trackUserLocation,showAccuracyCircle:e.showAccuracyCircle,showUserLocation:e.showUserLocation}),e);function n(a){const u=d=>{o.emit(a,d)};r.value.on(a,u),t.onBeforeUnmount(()=>{r.value.off(a,u)})}n("trackuserlocationstart"),n("trackuserlocationend"),n("userlocationlostfocus"),n("userlocationfocus"),n("geolocate"),n("error"),n("outofmaxbounds")},render(){return null}}),H=t.defineComponent({name:"MglNavigationControl",props:{position:{type:String,validator:e=>w.indexOf(e)!==-1},showCompass:{type:Boolean,default:!0},showZoom:{type:Boolean,default:!0},visualizePitch:Boolean},setup(e){L(()=>new p.NavigationControl({showCompass:e.showCompass,showZoom:e.showZoom,visualizePitch:e.visualizePitch}),e)},render(){return null}});var W=(e=>(e.IMPERIAL="imperial",e.METRIC="metric",e.NAUTICAL="nautical",e))(W||{});const Me=Object.values(W),D=t.defineComponent({name:"MglScaleControl",props:{position:{type:String,validator:e=>w.indexOf(e)!==-1},maxWidth:{type:Number,default:100},unit:{type:String,default:"metric",validator:e=>Me.indexOf(e)!==-1}},setup(e){L(()=>new p.ScaleControl({maxWidth:e.maxWidth,unit:e.unit}),e)},render(){return null}}),G=t.defineComponent({name:"MglLogoControl",props:{position:{type:String,validator:e=>w.indexOf(e)!==-1},compact:{type:Boolean}},setup(e){L(()=>new p.LogoControl({compact:e.compact}),e)},render(){return null}}),J=t.defineComponent({name:"MglMarker",emits:["dragstart","drag","dragend","update:coordinates"],props:{coordinates:{type:[Object,Array],required:!0},className:String,offset:[Object,Array],anchor:String,color:String,draggable:Boolean,clickTolerance:Number,rotation:Number,rotationAlignment:String,pitchAlignment:String,scale:Number,opacity:String,opacityWhenCovered:String,subpixelPositioning:{type:Boolean,default:!1}},setup(e,{slots:o,emit:r}){const n=t.inject(h),a=t.shallowRef(),u=t.ref(),d=t.ref(!1),s=new Map;function m(i,f){const z=l=>{f&&f(),r(i,l)};a.value.on(i,z),s.set(i,z)}return t.provide(A,a),t.onMounted(()=>{const i={...e};o.marker&&(i.element=u.value),a.value=new p.Marker(i),a.value.setLngLat(e.coordinates).addTo(n.value),m("dragstart"),m("drag",()=>{r("update:coordinates",a.value?.getLngLat())}),m("dragend",()=>{r("update:coordinates",a.value?.getLngLat())}),d.value=!0}),t.watch(()=>e.coordinates,i=>a.value?.setLngLat(i),{deep:!0}),t.watch(()=>e.draggable,i=>a.value?.setDraggable(i)),t.watch(()=>e.offset,i=>a.value?.setOffset(i||[0,0])),t.watch(()=>e.pitchAlignment,i=>a.value?.setPitchAlignment(i||"auto")),t.watch(()=>e.rotation,i=>a.value?.setRotation(i)),t.watch(()=>e.rotationAlignment,i=>a.value?.setRotationAlignment(i||"auto")),t.watch(()=>e.opacity,i=>a.value?.setOpacity(i,e.opacityWhenCovered)),t.watch(()=>e.opacityWhenCovered,i=>a.value?.setOpacity(e.opacity,i)),t.watch(()=>e.subpixelPositioning,i=>a.value?.setSubpixelPositioning(i)),t.watch(()=>e.className,(i,f)=>{f&&a.value?.removeClassName(f),i&&a.value?.addClassName(i)}),t.onBeforeUnmount(()=>{s.forEach((i,f)=>{a.value?.off(f,i)}),a.value?.remove()}),()=>[t.h("div",o.default&&d.value?o.default({}):void 0),t.h("div",{ref:u},o.marker?o.marker():void 0)]},render(){return null}}),$=t.defineComponent({name:"MglPopup",emits:["open","close"],props:{coordinates:{type:[Object,Array],required:!1},closeButton:{type:Boolean,required:!1,default:!0},closeOnClick:{type:Boolean,required:!1,default:!0},closeOnMove:{type:Boolean,required:!1,default:!1},focusAfterOpen:{type:Boolean,required:!1,default:!0},anchor:{type:String,required:!1},offset:{type:[Number,Object,Array],required:!1},className:{type:String,required:!1},maxWidth:{type:String,default:"240px"},subpixelPositioning:{type:Boolean,default:!1},text:{type:String,required:!1}},setup(e,{slots:o,emit:r,expose:n}){const a=t.inject(h),u=t.inject(A,void 0),d=t.ref(),s=new p.Popup(e);u&&u.value?u.value.setPopup(s):e.coordinates&&a&&s.setLngLat(e.coordinates).addTo(a.value),e.text&&s.setText(e.text);function m(i){const f=()=>r(i);s.on(i,f),t.onBeforeUnmount(()=>{s.off(i,f)})}return m("open"),m("close"),n({remove(){s.remove()}}),t.watch(()=>e.coordinates,i=>{i&&s.setLngLat(i)},{deep:!0}),t.watch(()=>e.text,i=>s.setText(i||"")),t.watch(()=>e.offset,i=>s.setOffset(i)),t.watch(()=>e.maxWidth,i=>s.setMaxWidth(i)),t.watch(()=>e.className,(i,f)=>{f&&s.removeClassName(f),i&&s.addClassName(i)}),t.watch(()=>e.subpixelPositioning,i=>s.setSubpixelPositioning(i)),t.onMounted(()=>{d.value&&!e.text&&s.setDOMContent(d.value)}),t.onBeforeUnmount(()=>{s.remove()}),()=>[t.h("div",{ref:d},o.default?o.default():void 0)]},render(){return null}}),K=t.defineComponent({name:"MglImage",props:{id:{type:String,required:!0},image:Object,url:String,options:Object},setup(e){const o=t.inject(h);if(!e.url&&!e.image)return t.warn(`${e.id} image: missing prop url or image`),()=>[];if(!o.value.hasImage(e.id))return(async()=>{let r=e.image;e.url&&(r=(await o.value.loadImage(e.url)).data),o.value.addImage(e.id,r,e.options)})(),()=>[]}});class I{unmountHandlers=new Map;registerUnmountHandler(o,r){this.unmountHandlers.set(o,r)}unregisterUnmountHandler(o){this.unmountHandlers.delete(o)}unmount(){this.unmountHandlers.forEach(o=>o())}}class y{static REFS=new Map;static genSourceOpts(o){const r={...o};for(const n of Object.keys(r))(r[n]===void 0||n==="sourceId")&&delete r[n];return r}static getSourceRef(o,r){const n=typeof r=="string",a=String(o)+(n?r:"");let u=y.REFS.get(a);return u||(u=t.ref(n?null:void 0),y.REFS.set(a,u)),u}}function v(e,o,r){const n=t.inject(h),a=t.inject(N);function u(){a.value&&!n.value?.getSource(o.sourceId)&&(n.value.addSource(o.sourceId,y.genSourceOpts(o)),e.value=n.value.getSource(o.sourceId))}return t.watch(a,u,{immediate:!0}),n.value.on("styledata",u),t.onBeforeUnmount(()=>{a.value&&n.value?.getSource(o.sourceId)&&(r.unmount(),n.value.removeSource(o.sourceId)),n.value.off("styledata",u),e.value=void 0})}const Y=t.defineComponent({name:"MglCanvasSource",props:{sourceId:{type:String,required:!0},coordinates:Array,animate:Boolean,canvas:[Object,String]},slots:Object,setup(e,{slots:o}){const r=t.inject(S),n=y.getSourceRef(r,e.sourceId),a=new I,u={...e,type:"canvas"};return t.provide(M,e.sourceId),t.provide(C,a),v(n,u,a),t.watch([t.isRef(e.coordinates)?e.coordinates:()=>e.coordinates,n],([d,s])=>{s?.setCoordinates(d)},{immediate:!0}),()=>[t.createCommentVNode("Canvas Source"),n.value&&o.default?o.default({}):void 0]}}),Q=t.defineComponent({name:"MglGeoJsonSource",props:{sourceId:{type:String,required:!0},data:{type:[Object,String],required:!0},maxzoom:Number,attribution:String,buffer:Number,tolerance:Number,cluster:Boolean,clusterRadius:Number,clusterMaxZoom:Number,clusterMinPoints:Number,clusterProperties:Object,lineMetrics:Boolean,generateId:Boolean,promoteId:[Object,String],filter:[Array,String,Object]},slots:Object,setup(e,{slots:o}){const r=t.inject(S),n=y.getSourceRef(r,e.sourceId),a=new I,u={...e,type:"geojson"};return t.provide(M,e.sourceId),t.provide(C,a),v(n,u,a),t.watch([t.isRef(e.data)?e.data:()=>e.data,n],([d,s])=>{s?.loaded()&&s?.setData(d||{type:"FeatureCollection",features:[]})},{immediate:!0}),()=>[t.createCommentVNode("GeoJSON Source"),n.value&&o.default?o.default({}):void 0]}}),X=t.defineComponent({name:"MglImageSource",props:{sourceId:{type:String,required:!0},url:String,coordinates:Array},slots:Object,setup(e,{slots:o}){const r=t.inject(S),n=y.getSourceRef(r,e.sourceId),a=new I,u={...e,type:"image"};return t.provide(M,e.sourceId),t.provide(C,a),v(n,u,a),t.watch([t.isRef(e.coordinates)?e.coordinates:()=>e.coordinates,n],([d,s])=>{s?.setCoordinates(d)},{immediate:!0}),()=>[t.createCommentVNode("Image Source"),n.value&&o.default?o.default({}):void 0]}}),ee=t.defineComponent({name:"MglRasterSource",props:{sourceId:{type:String,required:!0},url:String,tiles:Array,bounds:Array,minzoom:Number,maxzoom:Number,tileSize:Number,scheme:String,attribution:String,volatile:Boolean},slots:Object,setup(e,{slots:o}){const r=t.inject(S),n=y.getSourceRef(r,e.sourceId),a=new I,u={...e,type:"raster"};return t.provide(M,e.sourceId),t.provide(C,a),v(n,u,a),()=>[t.createCommentVNode("Raster Source"),n.value&&o.default?o.default({}):void 0]}}),te=t.defineComponent({name:"MglRasterDemSource",props:{sourceId:{type:String,required:!0},url:String,tiles:Array,bounds:Array,minzoom:Number,maxzoom:Number,tileSize:Number,attribution:String,encoding:String,volatile:Boolean,redFactor:Number,blueFactor:Number,greenFactor:Number,baseShift:Number},slots:Object,setup(e,{slots:o}){const r=t.inject(S),n=y.getSourceRef(r,e.sourceId),a=new I,u={...e,type:"raster-dem"};return t.provide(M,e.sourceId),t.provide(C,a),v(n,u,a),()=>[t.createCommentVNode("RasterDem Source"),n.value&&o.default?o.default({}):void 0]}}),oe=t.defineComponent({name:"MglVectorSource",props:{sourceId:{type:String,required:!0},url:String,tiles:Array,bounds:{type:Array,validator:function(e){return e.length===4}},scheme:String,minzoom:Number,maxzoom:Number,attribution:String,promoteId:[Object,String],volatile:Boolean},slots:Object,setup(e,{slots:o}){const r=t.inject(S),n=y.getSourceRef(r,e.sourceId),a=new I,u={...e,type:"vector"};return t.provide(M,e.sourceId),t.provide(C,a),v(n,u,a),t.watch([t.isRef(e.tiles)?e.tiles:()=>e.tiles,n],([d,s])=>{s?.loaded()&&s.setTiles(d||[])},{immediate:!0}),t.watch([t.isRef(e.url)?e.url:()=>e.url,n],([d,s])=>{s?.loaded()&&s.setUrl(d||"")},{immediate:!0}),()=>[t.createCommentVNode("Vector Source"),n.value&&o.default?o.default({}):void 0]}}),ae=t.defineComponent({name:"MglVideoSource",props:{sourceId:{type:String,required:!0},urls:Array,coordinates:Array},slots:Object,setup(e,{slots:o}){const r=t.inject(S),n=y.getSourceRef(r,e.sourceId),a=new I,u={...e,type:"video"};return t.provide(M,e.sourceId),t.provide(C,a),v(n,u,a),t.watch([t.isRef(e.coordinates)?e.coordinates:()=>e.coordinates,n],([d,s])=>{s?.setCoordinates(d)},{immediate:!0}),()=>[t.createCommentVNode("Video Source"),n.value&&o.default?o.default({}):void 0]}}),b=["click","dblclick","mousedown","mouseup","mousemove","mouseenter","mouseleave","mouseover","mouseout","contextmenu","touchstart","touchend","touchcancel"];function O(){return{layerId:{type:String,required:!0},source:{type:String},metadata:{type:[Object,Array,String,Number]},sourceLayer:{type:String},minzoom:{type:Number},maxzoom:{type:Number},filter:{type:Object},before:{type:String},layout:{type:Object},paint:{type:Object}}}function Ce(e,o,r,n){const a={id:e,type:o,source:r.source||n,metadata:r.metadata,minzoom:r.minzoom,maxzoom:r.maxzoom,"source-layer":r.sourceLayer,filter:r.filter,paint:r.paint,layout:r.layout};for(const u of Object.keys(a))a[u]===void 0&&delete a[u];return a}function we(e,o,r){if(r.props)for(const n of b){const a="on"+n.charAt(0).toUpperCase()+n.substr(1);r.props[a]&&e.on(n,o,r.props[a])}}function Le(e,o,r){if(r.props)for(const n of b){const a="on"+n.charAt(0).toUpperCase()+n.substr(1);r.props[a]&&e.off(n,o,r.props[a])}}function P(e,o){const r=t.inject(h),n=t.inject(N),a=t.inject(C);function u(){n.value&&(o&&Le(r.value,e,o.vnode),r.value.getLayer(e)&&r.value.removeLayer(e))}a.registerUnmountHandler(e,u),t.onBeforeUnmount(()=>{a.unregisterUnmountHandler(e),u()})}const ne=t.defineComponent({name:"MglBackgroundLayer",props:{layerId:{type:String,required:!0},metadata:[Object,Array,String,Number],minzoom:Number,maxzoom:Number,before:String,layout:Object,paint:Object},emits:[...b],setup(e){const o=t.inject(h),r=t.inject(N);return P(e.layerId),t.watch(()=>e.layout,n=>{if(n)for(const[a,u]of Object.entries(n))o.value.setLayoutProperty(e.layerId,a,u)}),t.watch(()=>e.paint,n=>{if(n)for(const[a,u]of Object.entries(n))o.value.setPaintProperty(e.layerId,a,u)}),t.watch(r,n=>{n&&o.value.addLayer({id:e.layerId,type:"background",metadata:e.metadata,minzoom:e.minzoom,maxzoom:e.maxzoom,layout:e.layout,paint:e.paint},e.before||void 0)},{immediate:!0}),()=>t.createCommentVNode("Background Layer")}});function j(e,o){const r=t.inject(M);if(!r&&!o.source){t.warn(`${e} Layer: layer must be used inside source tag or source prop must be set`);return}const n=t.getCurrentInstance(),a=t.inject(h),u=t.inject(N),d=t.inject(S),s=y.getSourceRef(d,o.source||r);return P(o.layerId,n),t.watch(()=>o.minzoom,()=>a.value.setLayerZoomRange(o.layerId,o.minzoom||0,o.maxzoom||24)),t.watch(()=>o.maxzoom,()=>a.value.setLayerZoomRange(o.layerId,o.minzoom||0,o.maxzoom||24)),t.watch(()=>o.layout,m=>{if(m)for(const[i,f]of Object.entries(m))a.value.setLayoutProperty(o.layerId,i,f)},{deep:!0}),t.watch(()=>o.paint,m=>{if(m)for(const[i,f]of Object.entries(m))a.value.setPaintProperty(o.layerId,i,f)},{deep:!0}),t.watch(()=>o.filter,m=>a.value.setFilter(o.layerId,m),{deep:!0}),t.watch([u,s],([m,i])=>{m&&(i||i===void 0)&&(a.value.addLayer(Ce(o.layerId,e,o,r),o.before||void 0),we(a.value,o.layerId,n.vnode))},{immediate:!0}),()=>t.createCommentVNode(`${e} Layer`)}const re=t.defineComponent({name:"MglCircleLayer",props:O(),emits:[...b],setup(e){return j("circle",e)}}),ie=t.defineComponent({name:"MglFillLayer",props:O(),emits:[...b],setup(e){return j("fill",e)}}),le=t.defineComponent({name:"MglFillExtrusionLayer",props:O(),emits:[...b],setup(e){return j("fill-extrusion",e)}}),ce=t.defineComponent({name:"MglHeatmapLayer",props:O(),emits:[...b],setup(e){return j("heatmap",e)}}),ue=t.defineComponent({name:"MglHillshadeLayer",props:O(),emits:[...b],setup(e){return j("hillshade",e)}}),se=t.defineComponent({name:"MglLineLayer",props:O(),emits:[...b],setup(e){return j("line",e)}}),de=t.defineComponent({name:"MglRasterLayer",props:O(),emits:[...b],setup(e){return j("raster",e)}}),me=t.defineComponent({name:"MglSymbolLayer",props:O(),emits:[...b],setup(e){return j("symbol",e)}}),ve=Object.freeze(Object.defineProperty({__proto__:null,MglAttributionControl:F,MglBackgroundLayer:ne,MglCanvasSource:Y,MglCircleLayer:re,MglCustomControl:V,MglFillExtrusionLayer:le,MglFillLayer:ie,MglFullscreenControl:U,MglGeoJsonSource:Q,MglGeolocateControl:Z,MglHeatmapLayer:ce,MglHillshadeLayer:ue,MglImage:K,MglImageSource:X,MglLineLayer:se,MglLogoControl:G,MglMap:E,MglMarker:J,MglNavigationControl:H,MglPopup:$,MglRasterDemSource:te,MglRasterLayer:de,MglRasterSource:ee,MglScaleControl:D,MglSymbolLayer:me,MglVectorSource:oe,MglVideoSource:ae},Symbol.toStringTag,{value:"Module"})),Oe=function(o){Object.entries(ve).forEach(([r,n])=>{o.component(r,n)})};c.MglAttributionControl=F,c.MglBackgroundLayer=ne,c.MglCanvasSource=Y,c.MglCircleLayer=re,c.MglCustomControl=V,c.MglFillExtrusionLayer=le,c.MglFillLayer=ie,c.MglFullscreenControl=U,c.MglGeoJsonSource=Q,c.MglGeolocateControl=Z,c.MglHeatmapLayer=ce,c.MglHillshadeLayer=ue,c.MglImage=K,c.MglImageSource=X,c.MglLineLayer=se,c.MglLogoControl=G,c.MglMap=E,c.MglMarker=J,c.MglNavigationControl=H,c.MglPopup=$,c.MglRasterDemSource=te,c.MglRasterLayer=de,c.MglRasterSource=ee,c.MglScaleControl=D,c.MglSymbolLayer=me,c.MglVectorSource=oe,c.MglVideoSource=ae,c.Position=B,c.componentIdSymbol=S,c.default=Oe,c.isInitialized=T,c.isInitializedSymbol=_,c.isLoadedSymbol=N,c.map=k,c.mapSymbol=h,c.markerSymbol=A,c.sourceIdSymbol=M,c.sourceLayerRegistry=C,c.useControl=L,c.useDisposableLayer=P,c.useMap=be,c.usePositionWatcher=q,c.useSource=v,Object.defineProperties(c,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})}));
//# sourceMappingURL=vue-maplibre-gl.umd.js.map
